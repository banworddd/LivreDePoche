{% extends "layout.html" %}
{% load static %}

{% block title %}
Детали книги
{% endblock %}

{% block content %}
<h1 id="book-title">Загрузка...</h1>
<p><strong>Автор:</strong> <span id="book-author">Загрузка...</span></p>
<p><strong>Описание:</strong> <span id="book-description">Загрузка...</span></p>
<p><strong>Год издания:</strong> <span id="book-year">Загрузка...</span></p>

{% if user.is_authenticated %}
    <div id="reading-list-buttons" data-username="{{ user.username }}">
        <h3>Добавить в список</h3>
        <button id="add-to-wishlist" data-status="planned">Добавить в список желаемого</button>
        <button id="add-to-reading" data-status="currently_reading">Добавить в список читаемого</button>
        <button id="add-to-completed" data-status="completed">Добавить в список прочитанного</button>
    </div>
{% endif %}

<div class="reviews-section">
    <!-- Форма для добавления или редактирования отзыва -->
    <form id="review-form">
        <textarea id="review-text" placeholder="Напишите ваш отзыв..." required></textarea>
        <button type="submit" id="review-submit-button">Добавить отзыв</button>
    </form>

    <!-- Список отзывов -->
    <ul id="reviews-list">
        <!-- Отзывы будут динамически добавляться сюда -->
    </ul>
</div>

{% if user.is_authenticated %}
    <div id="review-form-container" style="display:none;">
        <h3>Добавить отзыв</h3>
        <form id="review-form">
            <label for="rating">Оценка:</label>
            <select id="rating" name="rating" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <br>
            <label for="review-text">Текст отзыва:</label>
            <textarea id="review-text" name="review_text" rows="4" required></textarea>
            <br>
            <button type="submit">Добавить отзыв</button>
        </form>
    </div>
{% else %}
<p><a href="{% url 'users:login' %}">Войдите</a>, чтобы оставить отзыв или добавить книгу в список.</p>
{% endif %}

<script src="{% static 'js/book_detail.js' %}"></script>

{% endblock %}
